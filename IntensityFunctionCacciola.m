% === INTENSITY FUNCTION MODULE ===
% Op = Operators

% Main window
Op.IF1 = uifigure('Units','normalized','Position',[0.2 0.2 0.5 0.4],'MenuBar','none', ...
    'NumberTitle','off','Name','SynthQuake: Intensity Function','Visible','off', ...
    'CloseRequestFcn',@(h,e)functions.CloseIF(h,e,Op),'Icon',iconPath);

% Panels for method list and action buttons
IF1.Panel{1} = uipanel('Parent',Op.IF1,'Units','normalized','Position',[0.0 0.8 0.4 0.2], ...
    'Title','Select the intensity function','BorderType','none');
IF1.Panel{2} = uipanel('Parent',Op.IF1,'Units','normalized','Position',[0.4 0.0 0.6 1.0], ...
    'Title','Intensity function graph','BorderType','none');
IF1.Panel{3} = uipanel('Parent',Op.IF1,'Units','normalized','Position',[0.0 0.0 0.4 0.15], ...
    'BorderType','none');

% List of available methods
IF1.MethNames = {'Jennings et al. (1968)', ...
                'Liu (1969)', ...
                'Saragoni & Hart (1974)', ...
                'Stafford et al. (2009)',...
                'Li et al. (2017) - Option 1: Accel. Smoothing',...
                'Li et al. (2017) - Option 2: Accel. Envelope'};

% Dropdown menu to select method
IF1.List = uicontrol('Parent',IF1.Panel{1},'Style','popupmenu','Units','normalized', ...
    'Position',[0.05 0.2 0.9 0.6],'String',IF1.MethNames);

% Panels for each method’s input fields
for i = length(IF1.MethNames):-1:1
    IF1.MethPanel{i} = uipanel('Parent',Op.IF1,'Units','normalized','Position',[0.0 0.15 0.4 0.65], ...
        'Title','Intensity function parameters','BorderType','none');
end
set(IF1.MethPanel{1}, 'Visible', 'on');


%% === Parameter controls for Jennings et al. ===

IF1.Methods{1}.Edit{16} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.05 0.81 0.20 0.12],...
    'String','Fs =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{1}.Edit{1} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.05 0.62 0.20 0.12],...
    'String','D =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{1}.Edit{2} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.05 0.43 0.20 0.12],...
    'String','DS(5%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{1}.Edit{3} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.05 0.24 0.20 0.12],...
    'String','DS(95%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{1}.Edit{4} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.05 0.05 0.20 0.12],...
    'String','DS =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');

% Editable fields for times
IF1.Methods{1}.Edit{17} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.25 0.81 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{1}.Edit{5} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.25 0.62 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{1}.Edit{6} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.25 0.43 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{1}.Edit{7} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.25 0.24 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{1}.Edit{8} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.25 0.05 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% Units for time fields
IF1.Methods{1}.Edit{18} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.40 0.81 0.10 0.12],'String','[Hz]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{1}.Edit{9} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.40 0.62 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{1}.Edit{10} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.40 0.43 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{1}.Edit{11} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.40 0.24 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{1}.Edit{12} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.40 0.05 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% β parameter
IF1.Methods{1}.Edit{13} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.60 0.81 0.10 0.12],'String','β =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{1}.Edit{14} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.70 0.81 0.15 0.12],'String','0.5','Enable','on');
IF1.Methods{1}.Edit{15} = uicontrol('Parent',IF1.MethPanel{1},'Style','edit',...
    'Units','normalized','Position',[0.85 0.81 0.1 0.12],'String','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% === Parameter controls for Liu (1969) ===
% Labels
IF1.Methods{2}.Edit{19} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.05 0.81 0.20 0.12],'String','Fs =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{2}.Edit{1} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.05 0.62 0.20 0.12],'String','D =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{2}.Edit{2} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.05 0.43 0.20 0.12],'String','DS(5%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{2}.Edit{3} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.05 0.24 0.20 0.12],'String','DS(95%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{2}.Edit{4} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.05 0.05 0.20 0.12],'String','DS =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');

% Values
IF1.Methods{2}.Edit{20} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.25 0.81 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{5} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.25 0.62 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{6} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.25 0.43 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{7} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.25 0.24 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{8} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.25 0.05 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% Units
IF1.Methods{2}.Edit{21} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.40 0.81 0.10 0.12],'String','[Hz]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{9} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.40 0.62 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{10} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.40 0.43 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{11} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.40 0.24 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{12} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.40 0.05 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% α and β
IF1.Methods{2}.Edit{13} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.60 0.81 0.10 0.12],'String','α =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{2}.Edit{14} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.60 0.62 0.10 0.12],'String','β =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{2}.Edit{15} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.70 0.81 0.15 0.12],'String','0.1','Enable','on');
IF1.Methods{2}.Edit{16} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.70 0.62 0.15 0.12],'String','3.0','Enable','on');
IF1.Methods{2}.Edit{17} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.85 0.81 0.10 0.12],'String','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{2}.Edit{18} = uicontrol('Parent',IF1.MethPanel{2},'Style','edit',...
    'Units','normalized','Position',[0.85 0.62 0.10 0.12],'String','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);


% === Parameter controls for Saragoni & Hart ===
% Labels
IF1.Methods{3}.Edit{22}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.05 0.81 0.20 0.12],...
    'string','Fs =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{3}.Edit{1}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.05 0.62 0.20 0.12],...
    'string','D =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{3}.Edit{2}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.05 0.43 0.20 0.12],...
    'string','DS(5%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{3}.Edit{3}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.05 0.24 0.20 0.12],...
    'string','DS(95%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{3}.Edit{4}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.05 0.05 0.20 0.12],...
    'string','DS =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');

% Values
IF1.Methods{3}.Edit{23}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.25 0.81 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{5}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.25 0.62 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{6}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.25 0.43 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{7}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.25 0.24 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{8}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.25 0.05 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% Units
IF1.Methods{3}.Edit{24}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.40 0.81 0.10 0.12],...
    'string','[Hz]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{9}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.40 0.62 0.10 0.12],...
    'string','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{10}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.40 0.43 0.10 0.12],...
    'string','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{11}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.40 0.24 0.10 0.12],...
    'string','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{12}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.40 0.05 0.10 0.12],...
    'string','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% α, β and γ
IF1.Methods{3}.Edit{13}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.60 0.81 0.10 0.12],...
    'string','α =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{3}.Edit{14}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.60 0.62 0.10 0.12],...
    'string','β =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{3}.Edit{15}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.60 0.43 0.10 0.12],...
    'string','γ =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{3}.Edit{16}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.70 0.81 0.15 0.12],...
    'string','1.0','Enable','inactive');
IF1.Methods{3}.Edit{17}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.70 0.62 0.15 0.12],...
    'string','3.0','Enable','on');
IF1.Methods{3}.Edit{18}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.70 0.43 0.15 0.12],...
    'string','0.5','Enable','on');
IF1.Methods{3}.Edit{19}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.85 0.81 0.1 0.12],...
    'string','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{20}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.85 0.62 0.1 0.12],...
    'string','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{3}.Edit{21}=uicontrol('Parent',IF1.MethPanel{3},'Style','edit',...
    'Units','normalized','Position',[0.85 0.43 0.1 0.12],...
    'string','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);


% === Parameter controls for Stafford & otros ===
% Labels
IF1.Methods{4}.Edit{28}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.05 0.81 0.20 0.12],...
    'string','Fs =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{4}.Edit{1}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.05 0.62 0.20 0.12],...
    'string','D =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{4}.Edit{2}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.05 0.43 0.20 0.12],...
    'string','DS( 5%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{4}.Edit{3}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.05 0.24 0.20 0.12],...
    'string','DS(95%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{4}.Edit{4}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.05 0.05 0.20 0.12],...
    'string','DS =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');

% Values
IF1.Methods{4}.Edit{29}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.25 0.81 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{5}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.25 0.62 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{6}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.25 0.43 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{7}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.25 0.24 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{8}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.25 0.05 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% Units
IF1.Methods{4}.Edit{30}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.40 0.81 0.10 0.12],...
    'string','[Hz]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{9}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.40 0.62 0.10 0.12],...
    'string','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{10}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.40 0.43 0.10 0.12],...
    'string','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{11}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.40 0.24 0.10 0.12],...
    'string','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{12}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.40 0.05 0.10 0.12],...
    'string','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% Other parameters

IF1.Methods{4}.Edit{13}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.60 0.81 0.10 0.12],...
    'string','IA =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{4}.Edit{14}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.60 0.62 0.10 0.12],...
    'string','Mw =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{4}.Edit{15}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.60 0.43 0.10 0.12],...
    'string','Rrup =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{4}.Edit{16}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.60 0.24 0.10 0.12],...
    'string','Vs30 =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{4}.Edit{17}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.60 0.05 0.10 0.12],...
    'string','Ztor =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');

IF1.Methods{4}.Edit{18}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.70 0.81 0.15 0.12],...
    'string','0.5','Enable','on');
IF1.Methods{4}.Edit{19}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.70 0.62 0.15 0.12],...
    'string','6.0','Enable','on');
IF1.Methods{4}.Edit{20}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.70 0.43 0.15 0.12],...
    'string','50','Enable','on');
IF1.Methods{4}.Edit{21}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.70 0.24 0.15 0.12],...
    'string','200','Enable','on');
IF1.Methods{4}.Edit{22}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.70 0.05 0.15 0.12],...
    'string','30','Enable','on');

IF1.Methods{4}.Edit{23}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.85 0.81 0.1 0.12],...
    'string','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{24}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.85 0.62 0.1 0.12],...
    'string','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{25}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.85 0.43 0.1 0.12],...
    'string','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{26}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.85 0.24 0.1 0.12],...
    'string','[ m/s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{4}.Edit{27}=uicontrol('Parent',IF1.MethPanel{4},'Style','edit',...
    'Units','normalized','Position',[0.85 0.05 0.1 0.12],...
    'string','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% === Parameter controls for Li et al. Option 1 ===
IF1.Methods{5}.Edit{16} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.05 0.81 0.20 0.12],...
    'String','Fs =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{5}.Edit{1} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.05 0.62 0.20 0.12],...
    'String','D =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{5}.Edit{2} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.05 0.43 0.20 0.12],...
    'String','DS(5%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{5}.Edit{3} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.05 0.24 0.20 0.12],...
    'String','DS(95%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{5}.Edit{4} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.05 0.05 0.20 0.12],...
    'String','DS =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');

% Editable fields for times
IF1.Methods{5}.Edit{17} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.25 0.81 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{5}.Edit{5} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.25 0.62 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{5}.Edit{6} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.25 0.43 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{5}.Edit{7} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.25 0.24 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{5}.Edit{8} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.25 0.05 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% Units for time fields
IF1.Methods{5}.Edit{18} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.40 0.81 0.10 0.12],'String','[Hz]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{5}.Edit{9} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.40 0.62 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{5}.Edit{10} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.40 0.43 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{5}.Edit{11} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.40 0.24 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{5}.Edit{12} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.40 0.05 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% n parameter
IF1.Methods{5}.Edit{13} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.60 0.81 0.10 0.12],'String','n =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{5}.Edit{14} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.70 0.81 0.15 0.12],'String','1000','Enable','on');
IF1.Methods{5}.Edit{15} = uicontrol('Parent',IF1.MethPanel{5},'Style','edit',...
    'Units','normalized','Position',[0.85 0.81 0.1 0.12],'String','[ - ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% === Parameter controls for Li et al. Option 2 ===
IF1.Methods{6}.Edit{13} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.05 0.81 0.20 0.12],...
    'String','Fs =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{6}.Edit{1} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.05 0.62 0.20 0.12],...
    'String','D =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{6}.Edit{2} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.05 0.43 0.20 0.12],...
    'String','DS(5%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{6}.Edit{3} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.05 0.24 0.20 0.12],...
    'String','DS(95%) =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');
IF1.Methods{6}.Edit{4} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.05 0.05 0.20 0.12],...
    'String','DS =','Enable','inactive','BackgroundColor',[0.941 0.941 0.941],'HorizontalAlignment','right');

% Editable fields for times
IF1.Methods{6}.Edit{14} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.25 0.81 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{6}.Edit{5} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.25 0.62 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{6}.Edit{6} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.25 0.43 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{6}.Edit{7} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.25 0.24 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{6}.Edit{8} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.25 0.05 0.15 0.12],'Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);

% Units for time fields
IF1.Methods{6}.Edit{15} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.40 0.81 0.10 0.12],'String','[Hz]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{6}.Edit{9} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.40 0.62 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{6}.Edit{10} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.40 0.43 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{6}.Edit{11} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.40 0.24 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);
IF1.Methods{6}.Edit{12} = uicontrol('Parent',IF1.MethPanel{6},'Style','edit',...
    'Units','normalized','Position',[0.40 0.05 0.10 0.12],'String','[ s ]','Enable','inactive','BackgroundColor',[0.941 0.941 0.941]);


%% Accept and Cancel buttons
IF1.Button{1} = uicontrol('Parent',IF1.Panel{3},'Units','normalized','Position',[0.05 0.2 0.425 0.6], ...
    'Style','pushbutton','String','Cancel');
IF1.Button{2} = uicontrol('Parent',IF1.Panel{3},'Units','normalized','Position',[0.525 0.2 0.425 0.6], ...
    'Style','pushbutton','String','Accept');



%% Axes for plotting intensity function
IF1.ax = axes('Parent',IF1.Panel{2},'Units','normalized','Position',[0.1 0.14 0.85 0.80],'NextPlot','add');

% Axes properties
IF1.ax.XLabel.String = 'Time [s]';
IF1.ax.XLabel.FontWeight = 'normal';
IF1.ax.YLabel.String = 'Amplitude [-]';
IF1.ax.YLabel.FontWeight = 'normal';
IF1.ax.YLim = [0 1];
IF1.ax.XMinorGrid = 'on';
IF1.ax.YMinorGrid = 'on';
IF1.ax.Toolbar.Visible = 'on';

% Plot elements
IF1.p{2} = plot(IF1.ax,nan,nan);
IF1.p{1} = plot(IF1.ax,nan,nan);
IF1.p{2}.LineWidth = 1;
IF1.p{1}.LineWidth = 0.5;
IF1.p{2}.Color = '#A2142F';
IF1.p{1}.Color = [0.7 0.7 0.7];
IF1.p{1}.LineStyle = '--';


%% Assign callbacks to controls
set(IF1.Button{1}, 'Callback', @(h,e)functions.SaveIF(h,e,Op));
set(IF1.Button{2}, 'Callback', @(h,e)functions.SaveIF(h,e,Op));
set(IF1.List,      'Callback', @(h,e)functions.Cambio6(h,e,IF1,Op));

% Jennings
set(IF1.Methods{1}.Edit{5}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{1}.Edit{6}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{1}.Edit{7}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{1}.Edit{14}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));

% Liu
set(IF1.Methods{2}.Edit{5}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{2}.Edit{6}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{2}.Edit{15}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{2}.Edit{16}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));

% Saragoni & Hart
set(IF1.Methods{3}.Edit{5}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{3}.Edit{16}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{3}.Edit{17}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{3}.Edit{18}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));

% Stafford et al.
set(IF1.Methods{4}.Edit{5},  'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{4}.Edit{6},  'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{4}.Edit{18}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{4}.Edit{19}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{4}.Edit{20}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{4}.Edit{21}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{4}.Edit{22}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));

% Li et al. (1)
set(IF1.Methods{5}.Edit{5}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{5}.Edit{6}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{5}.Edit{7}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
set(IF1.Methods{5}.Edit{14}, 'Callback', @(h,e)functions.CalcIntensityFunction(h,e,IF1,Op));
